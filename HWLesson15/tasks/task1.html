<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>–ó–∞–¥–∞—á–∞ ‚Ññ1</title>
</head>

<body>
	<h1>–ó–∞–¥–∞—á–∞ ‚Ññ1 </h1>
	<h4>–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±‚Äô—î–∫—Ç ¬´–¢–∏—Ä¬ª. –£ –º–∞—Å–∏–≤—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è 1, —è–∫—â–æ —É —Ü—å–æ–º—É –∫–≤–∞–¥—Ä–∞—Ç—ñ —î –∑–∞—î—Ü—å —ñ 0 –≤ —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É.</h4>

	<script>

		let userWidthArea = 10;
		let ammo = 5;
		let rabbits = 3;
		function GameRange(userWidthArea, ammo, rabbits) {
			this.rabbits = rabbits; // –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–π—Ü—ñ–≤
			this.ammo = ammo; // –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞–±–æ—ó–≤
			this.userWidthArea = userWidthArea;  //–ó–∞–¥–∞–Ω–æ –ø–æ–ª–µ 
			this.gameArea = this.ganerateArea(); //–ú–∞—Å–∏–≤ —É —è–∫–æ–º—É –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø–æ–ª–µ –∑ –∑–∞–π—Ü—è–º–∏ 

		}

		// –ú–µ—Ç–æ–¥ –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ–ª—è 
		GameRange.prototype.ganerateArea = function () {
			let gameArea = new Array(this.userWidthArea).fill(0);
			let randomPosition = 0;
			for (let i = 0; i < this.rabbits;) {
				randomPosition = Math.floor(Math.random() * this.userWidthArea)
				if (gameArea[randomPosition] === 0) {
					gameArea[randomPosition] = 1
					i++;
				}
			}
			return gameArea;
		}
		// –ú–µ—Ç–æ–¥ –≤–∏—Å—Ç—Ä—ñ–ª—É
		GameRange.prototype.getuserShot = function (userShot) {
			if (userShot >= this.userWidthArea) {
				throw new Error('–í–∏ –ø–æ–ø–∞–ª–∏ –∑–∞ –º–µ–∂—ñ —Ç–∏—Ä—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ ')
			}

			if (this.gameArea[userShot] === 1) {
				this.gameArea[userShot] = 2
				this.rabbits--;
				this.ammo--;
				alert(`–¢–æ—á–Ω–æ –≤ —Ü—ñ–ª—å! –£ –≤–∞—Å –∑–∞–ª–∏—à–∏–ª–æ—Å—å ${this.ammo} –Ω–∞–±–æ—ó–≤ —ñ —â–µ –∑–∞–ª–∏—à–∏–ª–æ—Å—å ${this.rabbits} –∑–∞–π—Ü—ñ–≤`)
			} else if (this.gameArea[userShot] === 0) {
				this.gameArea[userShot] = 3
				this.ammo--;
				alert(`–í–∏ –ø—Ä–æ–º–∞–∑–∞–ª–∏ ! –£ –≤–∞—Å –∑–∞–ª–∏—à–∏–ª–æ—Å—å ${this.ammo} –Ω–∞–±–æ—ó–≤ —ñ —â–µ –∑–∞–ª–∏—à–∏–ª–æ—Å—å ${this.rabbits} –∑–∞–π—Ü—ñ–≤`)
			}

		}
		// –í–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–ª—è –Ω–∞ –µ–∫—Ä–∞–Ω 
		GameRange.prototype.getOutputArea = function () {
			document.write('<table border="2px"><tr>');
			for (let j = 0; j < this.gameArea.length; j++) {
				if (this.gameArea[j] === 2) {
					document.write('<td style="margin: 30px; background-color: green;">üêá</td>');
				} else if (this.gameArea[j] === 3) {
					document.write('<td style="margin: 30px; ">‚ùå</td>');
				} else {
					document.write('<td style="width: 20px; "></td>');
				}
			}
			document.write('</tr></table>');
		}


		GameRange.prototype.playGame = function () {    // –∑–∞–ø—É—Å–∫ –≥—Ä–∏
			this.ganerateArea()
			let result = true;
			do {
				let userShot = parseInt(prompt('–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏ –≤ —è–∫—É —Ö–æ—á–µ—Ç–µ –≤–∏—Å—Ç—Ä—ñ–ª–∏—Ç–∏ '))
				this.getuserShot(userShot - 1)
				if (this.rabbits === 0 || this.ammo === 0) {
					result = false;
				}
			} while (result);
			if (this.rabbits === 0) {
				alert(`–í—ñ—Ç–∞—é –í–∏ –≤–∏–≥—Ä–∞–ª–∏!  –£ –≤–∞—Å –∑–∞–ª–∏—à–∏–ª–æ—Å—å ${this.ammo} –Ω–∞–±–æ—ó–≤ `)
			} else if (this.ammo === 0) {
				alert(`–ù–∞–∂–∞–ª—å –≤–∏ –≤–∏—Ç—Ä–∞—Ç–∏–ª–∏ –≤—Å—ñ –Ω–∞–±–æ—ó. `)
			}
			this.getOutputArea()
		}


		let startGame = new GameRange(userWidthArea, ammo, rabbits);
		startGame.playGame()

	</script>
</body>

</html>